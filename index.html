<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XOCTLA - Herbolaria Tradicional Mexicana</title>

    <meta name="google-site-verification" content="EqF-lN907LJ2eiSVnIGIih9EcOzTIqytxvuHms1lU8w" />

    <link rel="stylesheet" href="styles-v3.css">

</head>
<body>

    <button class="menu-toggle" aria-label="Abrir men√∫">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <nav class="main-nav">
        <ul>
            <li><a href="#presentacion">¬øQui√©nes Somos?</a></li>
            <li><a href="#productos">Productos</a></li>
            <li class="submenu-parent">
                <a href="#fichas">Fichas T√©cnicas</a>
                <ul class="submenu">
                    <li><a href="Ficha tecnica Cempas√∫chil.pdf" target="_blank">Ficha T√©cnica Cempas√∫chil</a></li>
                    <li><a href="Ficha tecnica Tomillo.pdf" target="_blank">Ficha T√©cnica Tomillo</a></li>
                    <li><a href="Ficha tecnica Arnica.pdf" target="_blank">Ficha T√©cnica √Årnica</a></li>
                </ul>
            </li>
            <li><a href="#contacto">Contacto</a></li>
        </ul>
    </nav>

    <header>
        <div class="header-content">
            <h1 class="visually-hidden">üåø XOCTLA üåº</h1>
            <img src="logo.jpeg" alt="Logo de XOCTLA" class="logo">
            <p>Rescatando La Tradici√≥n Herbolaria Mexicana</p>
        </div>

        <button id="cart-toggle-btn" class="cart-toggle-btn" aria-label="Abrir carrito">
            üõí
            <span id="cart-counter">0</span>
        </button>
    </header>

    <div class="content">
        <main>
            <section id="presentacion">
                <h2>¬øQuienes Somos?</h2>
                <p>Somos un proyecto escolar dedicado a rescatar y presentar los beneficios de la herbolaria tradicional mexicana a trav√©s de productos sencillos y efectivos.</p>
            </section>

            <section id="productos">
                <h2>Nuestros Productos</h2>

                <div class="product-container">

                    <article class="producto cempasuchil" data-id="1" data-nombre="Aceite de Cempas√∫chil" data-precio="120">
                        <h3>üåº Aceite de Cempas√∫chil</h3>
                        <img src="https://via.placeholder.com/400x250.png?text=Cempas√∫chil" alt="Aceite de Cempas√∫chil" class="product-image">

                        <div class="product-info-wrapper">
                            <p class="product-price">$120.00 MXN</p>
                            <p>El Cempas√∫chil, la Flor de Muertos... (etc.)</p>
                            <ul>
                                <li>**Formato:** Aceite Esencial/Corporal.</li>
                                <li>**Uso Principal:** **Aromaterapia y Humectante de la piel**.</li>
                            </ul>
                        </div>
                        <button class="add-to-cart-btn">Agregar al Carrito</button>
                    </article>

                    <article class="producto tomillo" data-id="2" data-nombre="Pomada de Tomillo" data-precio="100">
                        <h3>üçÉ Pomada de Tomillo</h3>
                        <img src="https://via.placeholder.com/400x250.png?text=Tomillo" alt="Pomada de Tomillo" class="product-image">

                        <div class="product-info-wrapper">
                            <p class="product-price">$100.00 MXN</p>
                            <p>El Tomillo (**Thymus vulgaris**) ha sido utilizado ancestralmente... (etc.)</p>
                            <ul>
                                <li>**Formato:** Pomada/B√°lsamo.</li>
                                <li>**Uso Principal:** **Mejora las V√≠as respiratorias y Relajaci√≥n corporal**.</li>
                            </ul>
                        </div>
                        <button class="add-to-cart-btn">Agregar al Carrito</button>
                    </article>

                    <article class="producto arnica" data-id="3" data-nombre="Pomada de √Årnica" data-precio="110">
                        <h3>üü° Pomada de √Årnica</h3>
                        <img src="https://via.placeholder.com/400x250.png?text=√Årnica" alt="Pomada de √Årnica" class="product-image">

                        <div class="product-info-wrapper">
                            <p class="product-price">$110.00 MXN</p>
                            <p>La √Årnica es el cl√°sico remedio del botiqu√≠n... (etc.)</p>
                            <ul>
                                <li>**Formato:** Pomada/Ung√ºento.</li>
                                <li>**Uso Principal:** **Golpes y contusiones e Hinchaz√≥n**.</li>
                            </ul>
                        </div>
                        <button class="add-to-cart-btn">Agregar al Carrito</button>
                    </article>

                </div>
            </section>

            <section id="contacto">
                <h2>Contacto</h2>
                <p>¬øTienes preguntas sobre nuestros productos o el proyecto? Escr√≠benos.</p>
                <a href="mailto:xoctla.info@gmail.com" class="cta-button">Enviar un Correo</a>
            </section>
        </main>
    </div>

    <footer>
        <p>&copy; 2025 Proyecto Escolar: Herbolaria Mexicana. Todos los derechos reservados.</p>
    </footer>

    <div id="cart-sidebar" class="cart-sidebar">
        <button id="cart-close-btn" class="cart-close-btn" aria-label="Cerrar carrito">&times;</button>
        <h2>üõí Carrito de Compras</h2>
        <div id="cart-items-container">
            <p id="cart-empty-msg">Tu carrito est√° vac√≠o.</p>
        </div>
        <div id="cart-total">
            <h3>Total: $<span id="cart-total-price">0.00</span> MXN</h3>
            <button id="checkout-btn" class="cta-button">Proceder al Pago</button>
            <p id="cart-checkout-error" class="error-message">Tu carrito est√° vac√≠o. Agrega productos antes de pagar.</p>
        </div>
    </div>

    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <button id="modal-close-btn" class="modal-close-btn" aria-label="Cerrar pago">&times;</button>
            <h2>üí≥ Realizar Pago</h2>
            <p>Por favor, ingrese sus datos para completar la compra.</p>

            <form id="payment-form">
                <div class="form-group">
                    <label for="name">Nombre Completo:</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Correo Electr√≥nico:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="card">N√∫mero de Tarjeta:</label>
                    <input type="text" id="card" name="card" placeholder="1234 5678 9012 3456"
                           inputmode="numeric" maxlength="19" pattern="[0-9\\s]*" required>
                    <p id="card-error" class="error-message">Por favor, ingrese un n√∫mero de tarjeta v√°lido de 16 d√≠gitos.</p>
                </div>
                <button type="submit" class="cta-button">Pagar</button>
            </form>

            <div id="success-message" class="success-message">
                ‚úÖ ¬°Pago exitoso! Gracias por tu compra.
            </div>

        </div>
    </div>

    <div id="modal-backdrop" class="modal-backdrop"></div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- C√ìDIGO DEL MEN√ö ---
            const menuToggle = document.querySelector('.menu-toggle');
            const nav = document.querySelector('.main-nav');
            menuToggle.addEventListener('click', () => { nav.classList.toggle('is-open'); menuToggle.classList.toggle('is-open'); });
            nav.querySelectorAll('a:not(.submenu-parent > a)').forEach(link => { link.addEventListener('click', () => { nav.classList.remove('is-open'); menuToggle.classList.remove('is-open'); }); });
            const submenuParents = document.querySelectorAll('.submenu-parent > a');
            submenuParents.forEach(parent => { parent.addEventListener('click', (e) => { e.preventDefault(); parent.parentElement.classList.toggle('is-open'); }); });
            document.addEventListener('click', (e) => { const isMenuOpen = nav.classList.contains('is-open'); const clickedInsideNav = nav.contains(e.target); const clickedOnToggle = menuToggle.contains(e.target); if (isMenuOpen && !clickedInsideNav && !clickedOnToggle) { nav.classList.remove('is-open'); menuToggle.classList.remove('is-open'); } });

            /* ==============================================
             SCRIPT: L√ìGICA DEL CARRITO
            ==============================================
            */
            let cart = [];

            const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
            const cartToggleBtn = document.getElementById('cart-toggle-btn');
            const cartCounter = document.getElementById('cart-counter');
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartCloseBtn = document.getElementById('cart-close-btn');
            const cartItemsContainer = document.getElementById('cart-items-container');
            const cartTotalElement = document.getElementById('cart-total-price');
            const cartEmptyMsg = document.getElementById('cart-empty-msg');
            const checkoutBtn = document.getElementById('checkout-btn');

            const paymentModal = document.getElementById('payment-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const paymentForm = document.getElementById('payment-form');
            const backdrop = document.getElementById('modal-backdrop');

            const successMessage = document.getElementById('success-message');
            const cartCheckoutError = document.getElementById('cart-checkout-error');

            // --- Funciones de Modales ---
            function openCart() { cartSidebar.classList.add('is-open'); backdrop.classList.add('is-open'); }
            function closeCart() { cartSidebar.classList.remove('is-open'); backdrop.classList.remove('is-open'); }
            function openPaymentModal() { paymentModal.classList.add('is-open'); backdrop.classList.add('is-open'); }
            function closePaymentModal() { paymentModal.classList.remove('is-open'); backdrop.classList.remove('is-open'); successMessage.style.display = 'none'; }

            // --- Eventos de Carrito y Modales ---
            cartToggleBtn.addEventListener('click', openCart);
            cartCloseBtn.addEventListener('click', closeCart);
            modalCloseBtn.addEventListener('click', closePaymentModal);
            backdrop.addEventListener('click', () => { closeCart(); closePaymentModal(); });

            checkoutBtn.addEventListener('click', () => {
                cartCheckoutError.style.display = 'none';
                if (cart.length === 0) {
                    cartCheckoutError.style.display = 'block';
                    return;
                }
                closeCart();
                openPaymentModal();
            });

            // 1. A√±adir items al carrito
            addToCartButtons.forEach(button => { button.addEventListener('click', () => { const productCard = button.closest('.producto'); const product = { id: productCard.dataset.id, nombre: productCard.dataset.nombre, precio: parseFloat(productCard.dataset.precio) }; cart.push(product); updateCartUI(); openCart(); }); });

            // 2. Actualizar la UI del carrito
            function updateCartUI() {
                cartItemsContainer.innerHTML = '';
                if (cart.length === 0) { cartItemsContainer.appendChild(cartEmptyMsg.cloneNode(true)); cartTotalElement.textContent = '0.00'; cartCounter.textContent = '0'; cartCounter.style.display = 'none'; } else { let total = 0; cart.forEach(item => { const cartItem = document.createElement('div'); cartItem.className = 'cart-item'; cartItem.innerHTML = `<span>${item.nombre}</span><span>$${item.precio.toFixed(2)}</span>`; cartItemsContainer.appendChild(cartItem); total += item.precio; }); cartTotalElement.textContent = total.toFixed(2); cartCounter.textContent = cart.length; cartCounter.style.display = 'block'; }
            }

            // 3. Formulario de Pago
            paymentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                if (cart.length === 0) { return; }

                const cardInput = document.getElementById('card');
                const cardError = document.getElementById('card-error');
                const cardNumber = cardInput.value.replace(/\s/g, '');

                cardError.style.display = 'none';

                if (cardNumber.length !== 16 || isNaN(cardNumber)) {
                    cardError.style.display = 'block';
                    return;
                }

                // Esta es la l√≥gica que oculta el formulario
                paymentForm.style.display = 'none';
                successMessage.style.display = 'block';

                setTimeout(() => {
                    successMessage.style.display = 'none';
                    paymentForm.style.display = 'block';
                    paymentForm.reset();
                    cart = [];
                    updateCartUI();
                    closePaymentModal();
                    window.scrollTo(0, 0);
                }, 3000);
            });

            // Iniciar UI
            updateCartUI();

        });
    </script>

</body>
</html>